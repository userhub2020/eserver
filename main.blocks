<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="w7v[FLkBBdyblCd9,G7a">clients</variable><variable id="n,dCCt$3.g,Dwq2m.#Q3">client</variable><variable id="@ikc,}4CkWYJxuuL7puv">n</variable><variable id=".MYxC)JcS6lQhfYcH2$=">client2</variable><variable id="$m:Yyw|rb=5m7:j8=sC{">serialNumber</variable><variable id="|P:qoahKP]37|5Oy@;d[">client3</variable><variable id="!zmU#?{7X]22U+8TK)%L">now</variable><variable id="Xunb^nFKK@iD~@M~dE4E">client4</variable><variable id="V2^eJx#H_edI[E!F?lKt">lastPing</variable><variable id=",wTyu+!CM-.1{uNYGRya">deadPing</variable><variable id="-+U[C[~:brr0P8s?o4l3">lostPing</variable></variables><block type="pxt-on-start" id="C3?~tEZAg4(o5SU!u|X6" x="20" y="20"><statement name="HANDLER"><block type="variables_set" id="k9vjk3mE^bt[%3MPEjMK"><field name="VAR" id=",wTyu+!CM-.1{uNYGRya">deadPing</field><comment pinned="false" h="80" w="160">Radio monitoring dashboard

Each radio client is represented by a dot on the screen.
Once a client is registered, it will stay at the same pixel location
forever.

Radio clients can simply send a number (between 0..255) on group 4.
They must transmit the serial number using ``radio.setTransmitSerialNumber(true)``

The received number is used to set the LED brightness for that client.

If the radio packet is not received for 10sec, the LED starts blinking.</comment><value name="VALUE"><shadow type="math_number" id="V,?+0WQwR~Kr+Kj-h3%C"><field name="NUM">20000</field></shadow></value><next><block type="variables_set" id="*c^Yi2ds0213w_yd*Nn_"><field name="VAR" id="-+U[C[~:brr0P8s?o4l3">lostPing</field><value name="VALUE"><shadow type="math_number" id="$;wGgJ?Tz`-_]TIB3PXx"><field name="NUM">10000</field></shadow></value><next><block type="typescript_statement" id="+;ALyK#23z/Z*6jh{h_u" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="interface Client {" line1="    // client serial id" line2="    id: number;" line3="    // sprite on screen" line4="    sprite: game.LedSprite;" line5="    // last ping received" line6="    ping: number;" line7="}" numlines="8"></mutation><next><block type="radio_set_group" id="g{m?:o^xmPoAX6T-qVJC"><comment pinned="false" h="80" w="160">setup the radio and start!</comment><value name="ID"><shadow type="math_number_minmax" id=".XIa:]IS=sg_n@SOoUdr"><mutation min="0" max="255" label="Number" precision="0"></mutation><field name="SLIDER">4</field></shadow></value><next><block type="game_add_score" id="YcV-IvR0?a.r~qA!2#Y5"><value name="points"><shadow type="math_number" id="cU@OO`];:8-TnWW#6t^`"><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block><block type="argument_reporter_number" id="z1q3fYtME.VpuxRlLSP~" disabled="true" x="385" y="20"><field name="VALUE">id</field></block><block type="device_forever" id=")A.+rNU/?,k?x4Nv2NAW" x="478" y="20"><comment pinned="false" h="80" w="160">monitor the sprites and start blinking when no packet is received</comment><statement name="HANDLER"><block type="variables_set" id="zd$*d%)5hS7iRG,OhjVj"><field name="VAR" id="!zmU#?{7X]22U+8TK)%L">now</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="w[jq{Dw,gfA!js!k{IdG"></block></value><next><block type="pxt_controls_for_of" id="+7*8KHJHFZU6IKJWeg4i"><value name="VAR"><shadow type="variables_get_reporter" id="4wfjOT;Ixd/xhgzsVuAQ"><field name="VAR" id="Xunb^nFKK@iD~@M~dE4E">client4</field></shadow></value><value name="LIST"><block type="variables_get" id="+W-n)%ExniUG+-a4%qtO"><field name="VAR" id="w7v[FLkBBdyblCd9,G7a">clients</field></block></value><statement name="DO"><block type="variables_set" id="XOJFQ)uHfUPQkE+8Eus_"><field name="VAR" id="V2^eJx#H_edI[E!F?lKt">lastPing</field><comment pinned="false" h="80" w="160">lost signal starts blinking</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="yj_U(xs1h_Kfujuf`d{)"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="Gi/]7.e:t48$7xAcSB5w"><field name="VAR" id="!zmU#?{7X]22U+8TK)%L">now</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="?wsPTAC?Nh|qkNtRiaHD" editable="false"><field name="EXPRESSION">client4.ping</field></block></value></block></value><next><block type="controls_if" id="x2Ydaw/dMgwCM8,ZQEE;"><mutation elseif="1" else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="3kztH}GM(=ElWr7XBXj."><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="gEzkg8hVX!3U29EjXTC3"><field name="VAR" id="V2^eJx#H_edI[E!F?lKt">lastPing</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="c;jdg*|AQToVABAKmH]D"><field name="VAR" id=",wTyu+!CM-.1{uNYGRya">deadPing</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="n-6r#zc:mbiqT^1_e5zy" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBlink(0)" numlines="1"></mutation><next><block type="typescript_statement" id="!dRy~1L9-?z~ITN9sO_B" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBrightness(0)" numlines="1"></mutation></block></next></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=":aTH-tG(`sKCvz@*tgjO"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="xI_+f.lD[lVqqE/vky#]"><field name="VAR" id="V2^eJx#H_edI[E!F?lKt">lastPing</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="_KG)=A=)[iPh[6KYODpl"><field name="VAR" id="-+U[C[~:brr0P8s?o4l3">lostPing</field></block></value></block></value><statement name="DO1"><block type="typescript_statement" id="b}LXGOE;$F2N@G$]1ZjJ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBlink(500);" numlines="1"></mutation></block></statement><statement name="ELSE"><block type="typescript_statement" id="O0@*(Qb@eQ2R+3:j:*TH" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client4.sprite.setBlink(0);" numlines="1"></mutation></block></statement></block></next></block></statement><next><block type="device_pause" id="um;ybq|N#GKum4v=~8gC"><value name="pause"><shadow type="timePicker" id="[VnaUEthK|X8)}T0md?4"><field name="ms">500</field></shadow></value></block></next></block></next></block></statement></block><block type="radio_on_number_drag" id="18CZSY|%Py4Xpm:H1_,M" x="1095" y="20"><comment pinned="false" h="80" w="160">store data received by clients</comment><value name="HANDLER_DRAG_PARAM_receivedNumber"><shadow type="argument_reporter_number" id="fH`nUPys|eKE*fjK:3$s"><field name="VALUE">receivedNumber</field></shadow></value><statement name="HANDLER"><block type="variables_set" id="kIJDhNB]]wO(J!{uc3au"><field name="VAR" id="$m:Yyw|rb=5m7:j8=sC{">serialNumber</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="radio_received_packet" id="grp^@k]=PH1au{=)r*uf"><value name="type"><shadow type="radio_packet_property" id="ZOv;{P46|w2b~wh%7qC^"><field name="note">RadioPacketProperty.SerialNumber</field></shadow></value></block></value><next><block type="variables_set" id="j].mSCTBeAqAOi6dbHk1"><field name="VAR" id="|P:qoahKP]37|5Oy@;d[">client3</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="xHiYm[{wiEq*Om3%er5o"><mutation name="getClient" functionid="%QbUL:o5^PWPi:8^omNd"><arg name="id" id="ui7gag38u1brskxambf" type="number"></arg></mutation><value name="ui7gag38u1brskxambf"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get" id="syMM)/$7CU4WV`qPOhC("><field name="VAR" id="$m:Yyw|rb=5m7:j8=sC{">serialNumber</field></block></value></block></value><next><block type="controls_if" id="~**miRULyY]Ni(D5)r/7"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="NJVL:-@sn#S0YY/%blPb"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="1RmEmw-Tm.IrkY6QG@9o"><field name="VAR" id="|P:qoahKP]37|5Oy@;d[">client3</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="VpzAk_[]wMWM)*P+6Ta(" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return;" numlines="1"></mutation></block></statement><next><block type="typescript_statement" id="r*zLMxhbW?uw$[S)5FIG" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client3.ping = input.runningTime()" numlines="1"></mutation><next><block type="typescript_statement" id="_US+(BDzO%aZ])}gMyq=" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="client3.sprite.setBrightness(Math.max(1, receivedNumber &amp; 0xff));" numlines="1"></mutation></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id=")9c{VWLsyzS6`hVEHgu!" x="1796" y="20"><mutation name="getClient" functionid="%QbUL:o5^PWPi:8^omNd"><arg name="id" id="ui7gag38u1brskxambf" type="number"></arg></mutation><field name="function_name">getClient</field><comment pinned="false" h="80" w="160">lazy allocate sprite</comment><value name="ui7gag38u1brskxambf"><shadow type="argument_reporter_number" id="6;j(l|.2mBs?2|3u{}zm"><field name="VALUE">id</field></shadow></value><statement name="STACK"><block type="controls_if" id="NbuOkWx!b`*dh-bp+]]I"><comment pinned="false" h="80" w="160">needs an id to track radio client's identity</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="+V{}|RVZESB/B$1M@Ek$"><value name="BOOL"><shadow type="logic_boolean" id="PPtNyx5H@tEAPCBD*Io~"><field name="BOOL">TRUE</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="@}l$9A!Qa~Z28fD!n?dv"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id=".IV2,QWaqo[sVujcQT*f" editable="false"><field name="EXPRESSION">undefined</field></block></value></block></statement><next><block type="pxt_controls_for_of" id="$1/ih4jSPwVzZywwA6f:"><comment pinned="false" h="80" w="160">look for cached clients</comment><value name="VAR"><shadow type="variables_get_reporter" id=".SKk,[kt^KG{NkWUqMfZ"><field name="VAR" id="n,dCCt$3.g,Dwq2m.#Q3">client</field></shadow></value><value name="LIST"><block type="variables_get" id="3ha_6toD@9Ku!Ec-mT!)"><field name="VAR" id="w7v[FLkBBdyblCd9,G7a">clients</field></block></value><statement name="DO"><block type="controls_if" id="aoteLv|LhBsaNLZvZFi/"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="MZbCDNE3SZ|bYA20_X.D"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="oQFQ`6tZn;WB%`4o{KW2" editable="false"><field name="EXPRESSION">client.id</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Ck??Qw=~C{/lYJ+EmUgk"><field name="VALUE">id</field></block></value></block></value><statement name="DO0"><block type="function_return" id="CSH8[4QyHxNJ=zo?eWpc"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="/z.wg,L`Q`(X23)k7{3*"><field name="VAR" id="n,dCCt$3.g,Dwq2m.#Q3">client</field></block></value></block></statement></block></statement><next><block type="variables_set" id="Kz0TDSLnP)}!.*R?CA$%"><field name="VAR" id="@ikc,}4CkWYJxuuL7puv">n</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_length" id="Ab?#9XQOf60/+X%O**)W"><value name="VALUE"><block type="variables_get" id="Iz`!#!NR+nUWg5%dx4-i"><field name="VAR" id="w7v[FLkBBdyblCd9,G7a">clients</field></block></value></block></value><next><block type="controls_if" id="LX7_OJR@n+51Jb*2dmTw"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="EnmU7O@Fw+l?_#6y%Y#B"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="H%)pfvEuBElDLAKgTqtq"><field name="VAR" id="@ikc,}4CkWYJxuuL7puv">n</field></block></value><value name="B"><shadow type="math_number" id="-#BVooUX[OF%|gvdY38t"><field name="NUM">24</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="L9@)A:M0PyerFRC[mMoN"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><comment pinned="false" h="80" w="160">out of pixels</comment><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="8Lp4=L/AYmAz;0xAtZ|4" editable="false"><field name="EXPRESSION">undefined</field></block></value></block></statement><next><block type="typescript_statement" id="g[j]oOsa;d+Y(Z%DcBvZ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const client2: Client = {" line1="        id: id," line2="        sprite: game.createSprite(n % 5, n / 5)," line3="        ping: input.runningTime()" line4="    }" numlines="5" declaredvars="client2"></mutation><next><block type="array_push" id="5vn/~YS+BZ%jva%b0:s6"><value name="list"><block type="variables_get" id="oTBwMwbA*B)X4zwQ?sqU"><field name="VAR" id="w7v[FLkBBdyblCd9,G7a">clients</field></block></value><value name="value"><block type="variables_get" id=",C%bT2G77+x5?Xt(cf$5"><field name="VAR" id=".MYxC)JcS6lQhfYcH2$=">client2</field></block></value><next><block type="function_return" id="/,8UM^fiGMy79epnNWjp"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=")x4ocIQzUA}Fa9!f#),G"><field name="VAR" id=".MYxC)JcS6lQhfYcH2$=">client2</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>